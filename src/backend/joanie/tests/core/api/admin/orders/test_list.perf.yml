OrdersAdminApiListTestCase.test_api_admin_orders_list:
- db: 'SELECT ... FROM "django_session" WHERE ("django_session"."expire_date" > #::timestamptz AND "django_session"."session_key" = #) LIMIT #'
- db: 'SELECT ... FROM "joanie_user" WHERE "joanie_user"."id" = #::uuid LIMIT #'
- db: SELECT COUNT(*) AS "__count" FROM "joanie_order"
- db: 'SELECT ... FROM "joanie_order" LEFT OUTER JOIN "joanie_organization" ON ("joanie_order"."organization_id" = "joanie_organization"."id") INNER JOIN "joanie_product" ON ("joanie_order"."product_id" = "joanie_product"."id") LEFT OUTER JOIN "joanie_course" ON ("joanie_order"."course_id" = "joanie_course"."id") LEFT OUTER JOIN "joanie_enrollment" ON ("joanie_order"."enrollment_id" = "joanie_enrollment"."id") LEFT OUTER JOIN "joanie_course_run" ON ("joanie_enrollment"."course_run_id" = "joanie_course_run"."id") LEFT OUTER JOIN "joanie_user" ON ("joanie_order"."owner_id" = "joanie_user"."id") LEFT OUTER JOIN "joanie_credit_card" ON ("joanie_order"."credit_card_id" = "joanie_credit_card"."id") LEFT OUTER JOIN "joanie_certificate" ON ("joanie_order"."id" = "joanie_certificate"."order_id") LEFT OUTER JOIN "joanie_certificate_definition" ON ("joanie_certificate"."certificate_definition_id" = "joanie_certificate_definition"."id") LEFT OUTER JOIN "joanie_contract" ON ("joanie_order"."id" = "joanie_contract"."order_id") LEFT OUTER JOIN "joanie_contract_definition" ON ("joanie_contract"."definition_id" = "joanie_contract_definition"."id") ORDER BY "joanie_order"."created_on" DESC LIMIT #'
- cache|get: parler.core.OrganizationTranslation.#.en-us
- cache|get: parler.core.ProductTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_offeringrule" INNER JOIN "joanie_order_offering_rules" ON ("joanie_offeringrule"."id" = "joanie_order_offering_rules"."offeringrule_id") INNER JOIN "joanie_course_product_relation" ON ("joanie_offeringrule"."course_product_relation_id" = "joanie_course_product_relation"."id") WHERE "joanie_order_offering_rules"."order_id" = #::uuid ORDER BY "joanie_course_product_relation"."created_on" DESC, "joanie_offeringrule"."position" ASC'
- cache|get: parler.core.OrganizationTranslation.#.en-us
- cache|get: parler.core.ProductTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_offeringrule" INNER JOIN "joanie_order_offering_rules" ON ("joanie_offeringrule"."id" = "joanie_order_offering_rules"."offeringrule_id") INNER JOIN "joanie_course_product_relation" ON ("joanie_offeringrule"."course_product_relation_id" = "joanie_course_product_relation"."id") WHERE "joanie_order_offering_rules"."order_id" = #::uuid ORDER BY "joanie_course_product_relation"."created_on" DESC, "joanie_offeringrule"."position" ASC'
OrdersAdminApiListTestCase.test_api_admin_orders_list_discount:
- db: 'SELECT ... FROM "django_session" WHERE ("django_session"."expire_date" > #::timestamptz AND "django_session"."session_key" = #) LIMIT #'
- db: 'SELECT ... FROM "joanie_user" WHERE "joanie_user"."id" = #::uuid LIMIT #'
- db: SELECT COUNT(*) AS "__count" FROM "joanie_order"
- db: 'SELECT ... FROM "joanie_order" LEFT OUTER JOIN "joanie_organization" ON ("joanie_order"."organization_id" = "joanie_organization"."id") INNER JOIN "joanie_product" ON ("joanie_order"."product_id" = "joanie_product"."id") LEFT OUTER JOIN "joanie_course" ON ("joanie_order"."course_id" = "joanie_course"."id") LEFT OUTER JOIN "joanie_enrollment" ON ("joanie_order"."enrollment_id" = "joanie_enrollment"."id") LEFT OUTER JOIN "joanie_course_run" ON ("joanie_enrollment"."course_run_id" = "joanie_course_run"."id") LEFT OUTER JOIN "joanie_user" ON ("joanie_order"."owner_id" = "joanie_user"."id") LEFT OUTER JOIN "joanie_credit_card" ON ("joanie_order"."credit_card_id" = "joanie_credit_card"."id") LEFT OUTER JOIN "joanie_certificate" ON ("joanie_order"."id" = "joanie_certificate"."order_id") LEFT OUTER JOIN "joanie_certificate_definition" ON ("joanie_certificate"."certificate_definition_id" = "joanie_certificate_definition"."id") LEFT OUTER JOIN "joanie_contract" ON ("joanie_order"."id" = "joanie_contract"."order_id") LEFT OUTER JOIN "joanie_contract_definition" ON ("joanie_contract"."definition_id" = "joanie_contract_definition"."id") ORDER BY "joanie_order"."created_on" DESC LIMIT #'
- cache|get: parler.core.OrganizationTranslation.#.en-us
- cache|get: parler.core.ProductTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_voucher" WHERE "joanie_voucher"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_discount" WHERE "joanie_discount"."id" = #::uuid LIMIT #'
- cache|get: parler.core.OrganizationTranslation.#.en-us
- cache|get: parler.core.ProductTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_offeringrule" INNER JOIN "joanie_order_offering_rules" ON ("joanie_offeringrule"."id" = "joanie_order_offering_rules"."offeringrule_id") INNER JOIN "joanie_course_product_relation" ON ("joanie_offeringrule"."course_product_relation_id" = "joanie_course_product_relation"."id") WHERE "joanie_order_offering_rules"."order_id" = #::uuid ORDER BY "joanie_course_product_relation"."created_on" DESC, "joanie_offeringrule"."position" ASC'
- db: 'SELECT ... FROM "joanie_discount" WHERE "joanie_discount"."id" = #::uuid LIMIT #'
- cache|get: parler.core.OfferingRuleTranslation.#.en-us
OrdersAdminApiListTestCase.test_api_admin_orders_list_voucher:
- db: 'SELECT ... FROM "django_session" WHERE ("django_session"."expire_date" > #::timestamptz AND "django_session"."session_key" = #) LIMIT #'
- db: 'SELECT ... FROM "joanie_user" WHERE "joanie_user"."id" = #::uuid LIMIT #'
- db: SELECT COUNT(*) AS "__count" FROM "joanie_order"
- db: 'SELECT ... FROM "joanie_order" LEFT OUTER JOIN "joanie_organization" ON ("joanie_order"."organization_id" = "joanie_organization"."id") INNER JOIN "joanie_product" ON ("joanie_order"."product_id" = "joanie_product"."id") LEFT OUTER JOIN "joanie_course" ON ("joanie_order"."course_id" = "joanie_course"."id") LEFT OUTER JOIN "joanie_enrollment" ON ("joanie_order"."enrollment_id" = "joanie_enrollment"."id") LEFT OUTER JOIN "joanie_course_run" ON ("joanie_enrollment"."course_run_id" = "joanie_course_run"."id") LEFT OUTER JOIN "joanie_user" ON ("joanie_order"."owner_id" = "joanie_user"."id") LEFT OUTER JOIN "joanie_credit_card" ON ("joanie_order"."credit_card_id" = "joanie_credit_card"."id") LEFT OUTER JOIN "joanie_certificate" ON ("joanie_order"."id" = "joanie_certificate"."order_id") LEFT OUTER JOIN "joanie_certificate_definition" ON ("joanie_certificate"."certificate_definition_id" = "joanie_certificate_definition"."id") LEFT OUTER JOIN "joanie_contract" ON ("joanie_order"."id" = "joanie_contract"."order_id") LEFT OUTER JOIN "joanie_contract_definition" ON ("joanie_contract"."definition_id" = "joanie_contract_definition"."id") ORDER BY "joanie_order"."created_on" DESC LIMIT #'
- cache|get: parler.core.OrganizationTranslation.#.en-us
- cache|get: parler.core.ProductTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_voucher" WHERE "joanie_voucher"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_discount" WHERE "joanie_discount"."id" = #::uuid LIMIT #'

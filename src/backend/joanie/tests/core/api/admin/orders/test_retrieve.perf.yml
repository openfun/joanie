OrdersAdminApiRetrieveTestCase.test_api_admin_orders_course_retrieve:
- db: 'SELECT ... FROM "django_session" WHERE ("django_session"."expire_date" > #::timestamptz AND "django_session"."session_key" = #) LIMIT #'
- db: 'SELECT ... FROM "joanie_user" WHERE "joanie_user"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_order" LEFT OUTER JOIN "joanie_organization" ON ("joanie_order"."organization_id" = "joanie_organization"."id") INNER JOIN "joanie_product" ON ("joanie_order"."product_id" = "joanie_product"."id") LEFT OUTER JOIN "joanie_course" ON ("joanie_order"."course_id" = "joanie_course"."id") LEFT OUTER JOIN "joanie_enrollment" ON ("joanie_order"."enrollment_id" = "joanie_enrollment"."id") LEFT OUTER JOIN "joanie_course_run" ON ("joanie_enrollment"."course_run_id" = "joanie_course_run"."id") LEFT OUTER JOIN "joanie_user" ON ("joanie_order"."owner_id" = "joanie_user"."id") LEFT OUTER JOIN "joanie_credit_card" ON ("joanie_order"."credit_card_id" = "joanie_credit_card"."id") LEFT OUTER JOIN "joanie_certificate" ON ("joanie_order"."id" = "joanie_certificate"."order_id") LEFT OUTER JOIN "joanie_certificate_definition" ON ("joanie_certificate"."certificate_definition_id" = "joanie_certificate_definition"."id") LEFT OUTER JOIN "joanie_contract" ON ("joanie_order"."id" = "joanie_contract"."order_id") LEFT OUTER JOIN "joanie_contract_definition" ON ("joanie_contract"."definition_id" = "joanie_contract_definition"."id") WHERE "joanie_order"."id" = #::uuid LIMIT #'
- cache|get: parler.core.ProductTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_course" INNER JOIN "joanie_product_target_course_relation" ON ("joanie_course"."id" = "joanie_product_target_course_relation"."course_id") WHERE "joanie_product_target_course_relation"."product_id" = #::uuid ORDER BY "joanie_course"."code" ASC'
- cache|get: parler.core.CourseTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_course_run" WHERE "joanie_course_run"."course_id" = #::uuid ORDER BY "joanie_course_run"."created_on" DESC'
- cache|get: parler.core.OrganizationTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_offeringrule" INNER JOIN "joanie_order_offering_rules" ON ("joanie_offeringrule"."id" = "joanie_order_offering_rules"."offeringrule_id") INNER JOIN "joanie_course_product_relation" ON ("joanie_offeringrule"."course_product_relation_id" = "joanie_course_product_relation"."id") WHERE "joanie_order_offering_rules"."order_id" = #::uuid ORDER BY "joanie_course_product_relation"."created_on" DESC, "joanie_offeringrule"."position" ASC'
- db: 'SELECT ... FROM "joanie_course_product_relation" WHERE "joanie_course_product_relation"."id" = #::uuid LIMIT #'
- db: 'SELECT COUNT(*) AS "__count" FROM "joanie_order" INNER JOIN "joanie_order_offering_rules" ON ("joanie_order"."id" = "joanie_order_offering_rules"."order_id") LEFT OUTER JOIN "joanie_enrollment" ON ("joanie_order"."enrollment_id" = "joanie_enrollment"."id") LEFT OUTER JOIN "joanie_course_run" ON ("joanie_enrollment"."course_run_id" = "joanie_course_run"."id") WHERE ("joanie_order_offering_rules"."offeringrule_id" = #::uuid AND ("joanie_order"."course_id" = #::uuid OR "joanie_course_run"."course_id" = #::uuid) AND "joanie_order"."product_id" = #::uuid AND "joanie_order"."state" IN (...))'
- db: 'SELECT COUNT(*) AS "__count" FROM "joanie_order" INNER JOIN "joanie_order_offering_rules" ON ("joanie_order"."id" = "joanie_order_offering_rules"."order_id") WHERE ("joanie_order_offering_rules"."offeringrule_id" = #::uuid AND "joanie_order"."course_id" = #::uuid AND "joanie_order"."product_id" = #::uuid AND "joanie_order"."state" = #)'
- db: 'SELECT # AS "a" FROM "joanie_order" INNER JOIN "joanie_order_offering_rules" ON ("joanie_order"."id" = "joanie_order_offering_rules"."order_id") WHERE "joanie_order_offering_rules"."offeringrule_id" = #::uuid LIMIT #'
- cache|get: parler.core.OfferingRuleTranslation.#.en-us
- cache|get: parler.core.CertificateDefinitionTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_invoice" WHERE ("joanie_invoice"."order_id" = #::uuid AND "joanie_invoice"."parent_id" IS #) LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_address" WHERE "joanie_address"."id" = #::uuid LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_address" WHERE "joanie_address"."id" = #::uuid LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_address" WHERE "joanie_address"."id" = #::uuid LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
OrdersAdminApiRetrieveTestCase.test_api_admin_orders_enrollment_retrieve:
- db: 'SELECT ... FROM "django_session" WHERE ("django_session"."expire_date" > #::timestamptz AND "django_session"."session_key" = #) LIMIT #'
- db: 'SELECT ... FROM "joanie_user" WHERE "joanie_user"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_order" LEFT OUTER JOIN "joanie_organization" ON ("joanie_order"."organization_id" = "joanie_organization"."id") INNER JOIN "joanie_product" ON ("joanie_order"."product_id" = "joanie_product"."id") LEFT OUTER JOIN "joanie_course" ON ("joanie_order"."course_id" = "joanie_course"."id") LEFT OUTER JOIN "joanie_enrollment" ON ("joanie_order"."enrollment_id" = "joanie_enrollment"."id") LEFT OUTER JOIN "joanie_course_run" ON ("joanie_enrollment"."course_run_id" = "joanie_course_run"."id") LEFT OUTER JOIN "joanie_user" ON ("joanie_order"."owner_id" = "joanie_user"."id") LEFT OUTER JOIN "joanie_credit_card" ON ("joanie_order"."credit_card_id" = "joanie_credit_card"."id") LEFT OUTER JOIN "joanie_certificate" ON ("joanie_order"."id" = "joanie_certificate"."order_id") LEFT OUTER JOIN "joanie_certificate_definition" ON ("joanie_certificate"."certificate_definition_id" = "joanie_certificate_definition"."id") LEFT OUTER JOIN "joanie_contract" ON ("joanie_order"."id" = "joanie_contract"."order_id") LEFT OUTER JOIN "joanie_contract_definition" ON ("joanie_contract"."definition_id" = "joanie_contract_definition"."id") WHERE "joanie_order"."id" = #::uuid LIMIT #'
- cache|get: parler.core.ProductTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_course" INNER JOIN "joanie_product_target_course_relation" ON ("joanie_course"."id" = "joanie_product_target_course_relation"."course_id") WHERE "joanie_product_target_course_relation"."product_id" = #::uuid ORDER BY "joanie_course"."code" ASC'
- cache|get: parler.core.CourseRunTranslation.#.en-us
- cache|get: parler.core.OrganizationTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_offeringrule" INNER JOIN "joanie_order_offering_rules" ON ("joanie_offeringrule"."id" = "joanie_order_offering_rules"."offeringrule_id") INNER JOIN "joanie_course_product_relation" ON ("joanie_offeringrule"."course_product_relation_id" = "joanie_course_product_relation"."id") WHERE "joanie_order_offering_rules"."order_id" = #::uuid ORDER BY "joanie_course_product_relation"."created_on" DESC, "joanie_offeringrule"."position" ASC'
- cache|get: parler.core.CertificateDefinitionTranslation.#.en-us
- db: 'SELECT ... FROM "joanie_invoice" WHERE ("joanie_invoice"."order_id" = #::uuid AND "joanie_invoice"."parent_id" IS #) LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_address" WHERE "joanie_address"."id" = #::uuid LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'

InvoiceModelTestCase.test_models_invoice_state_paid:
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
InvoiceModelTestCase.test_models_invoice_state_refunded:
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."id" = #::uuid LIMIT #'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
InvoiceModelTestCase.test_models_invoice_state_unpaid:
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'
- db: 'SELECT SUM("joanie_transaction"."total") AS "total" FROM "joanie_transaction" WHERE ("joanie_transaction"."invoice_id" IN (SELECT U0."id" FROM "joanie_invoice" U0 WHERE U0."parent_id" = #::uuid) OR "joanie_transaction"."invoice_id" = #::uuid)'
- db: 'SELECT ... FROM "joanie_invoice" WHERE "joanie_invoice"."parent_id" = #::uuid'

#!/usr/bin/python3
"""
This script is used to update the swagger.json file in the joanie/tests/swagger directory.
It is used to test the generated openapi schema against the actual schema.
"""

import json
import os
import urllib.request

response = urllib.request.urlopen("http://localhost:8071/v1.0/swagger.json")
schema = json.load(response)
# replace the host with the testserver used in the tests
schema["host"] = "testserver"

path = os.path.join(os.path.dirname(__file__), "../src/backend/joanie/tests/swagger/swagger.json")
with open(path, "w") as f:
    json.dump(schema, f, indent=2)
